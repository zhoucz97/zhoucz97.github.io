---
layout: post
title: 莫烦numpy教程笔记
date: 2020-07-09
categories: 学习笔记
tags: python numpy
---

> 莫烦小哥哥的教程，很简短，和pandas教程放在一起的，一共大概两个多小时，numpy占一个来小时，很快就可以看完，入门佳选。

### [视频地址](https://www.bilibili.com/video/BV1Ex411L7oT?from=search&seid=8015826183781802668)

### 我的笔记，用jupyter写的

网盘里是.md和.ipynb格式
链接：https://pan.baidu.com/s/1Y2EZda03sHHhdo7WqY5mCA 
提取码：bc6h

### 笔记内容

## numpy array

1. `np.array(list)`创建一个array  
`np.array(list, dtype=np.int)` dtype可以指定数据类型  
`np.zeros(shape)` 创建全0的array  
`np.ones(shape)` 创建全1的array  
`np.empty(shape)` 创建随机array  
`np.arange([start], end, [step], [dtype])`  
`np.linspace(start, end, sections)`从start到end分成若干段
2. `array.ndim`array的维数
3. `array.shape`array的形状
4. `array.size`array的元素个数



```python
import numpy as np
```


```python
arr = np.array([[1,2,3], [2,3,4]])
```


```python
print(arr)
np.linspace()
print(arr.ndim)
print(arr.shape)
print(arr.size)
```

    [[1 2 3]
     [2 3 4]]
    2
    (2, 3)
    6
    

## numpy基础运算

- `array1 + array2` array对应位相加
- `array1 * array2` 对应位相乘
- `array1.dot(array2)`=`numpy.dot(array1, array2)` 矩阵乘法
- `numpy.random.random(shape)` 生成shape形状的0~1的随机array
- `np.sum(array, axis)` 按某维度求和
- `np.min(array, axis)` 按某维度求最小值
- `np.max(array, axis)` 按某维度求最大值
- #### 关于axis!!  二维的话0表示列，1表示行；多维的话记住，0就是第0层，也就是最外层，1是第1层，n是第n层，也就是最内层
- `np.argmin(A)` array的最小值所对应的索引值
- `np.mean(array)` =  `array.mean()` = `np.average(array)`array的平均值
- `np.median(array)` array的中位数
- `np.cumsum(array)` 逐位累加，输出和array形状一样的数组，见样例
- `np.diff(array)` array中一个数和前一个数之差，见样例
- `np.nonzero(array)` 输出两个array,分别是非零元素的行和列
- `np.sort(array)` 排序  axis=1按行排序（默认），axis=0按列排序
- `array.T` = `np.transpose(array)` array的转置
- `np.clip(array, min, max)` 将array中小于min的值都设成min,大于max的值都设成max



```python
import numpy as np
```


```python
a = np.array([10,20,30,40])
b = np.arange(4)
print(a , b)
```

    [10 20 30 40] [0 1 2 3]
    


```python
print(a + b)
```

    [10 21 32 43]
    


```python
b**2
```




    array([0, 1, 4, 9], dtype=int32)




```python
b<3
```




    array([ True,  True,  True, False])




```python
a = np.array([[1,2], [3,4]])
b = np.arange(4).reshape((2,2))
```


```python
c = a * b
print(c)
```

    [[ 0  2]
     [ 6 12]]
    


```python
d = a.dot(b)
print(d)
print(np.dot(a, b))
```

    [[ 4  7]
     [ 8 15]]
    [[ 4  7]
     [ 8 15]]
    


```python
np.min(a, axis=0)
```




    array([1, 2])




```python
np.cumsum(a)
```




    array([ 1,  3,  6, 10], dtype=int32)




```python
np.diff([[1,2,3,4], [5,6,10,8]])
```




    array([[ 1,  1,  1],
           [ 1,  4, -2]])




```python
arr = np.random.random((2,3,4))
arr
```




    array([[[0.21008032, 0.1192331 , 0.00914905, 0.72947293],
            [0.02839615, 0.09864839, 0.39741167, 0.57597824],
            [0.96836791, 0.51862262, 0.88087796, 0.46328493]],
    
           [[0.65260805, 0.53992939, 0.56990468, 0.24925595],
            [0.22224978, 0.30332973, 0.09053094, 0.52629985],
            [0.68196468, 0.58885901, 0.27143766, 0.57624114]]])




```python
np.sort(arr, axis=0)
```




    array([[[0.21008032, 0.1192331 , 0.00914905, 0.24925595],
            [0.02839615, 0.09864839, 0.09053094, 0.52629985],
            [0.68196468, 0.51862262, 0.27143766, 0.46328493]],
    
           [[0.65260805, 0.53992939, 0.56990468, 0.72947293],
            [0.22224978, 0.30332973, 0.39741167, 0.57597824],
            [0.96836791, 0.58885901, 0.88087796, 0.57624114]]])




```python
np.clip(a, 2, 3)
```




    array([[2, 2],
           [3, 3]])



## numpy索引
用法和list差不多，支持切片


```python
import numpy as np
```


```python
A = np.arange(3, 15).reshape((3, 4))
```


```python
print(A, '\n')
print(A[2], '\n')
print(A[2, :], '\n')
print(A[2, 0: 2], '\n')
print(A[2][0], '\n')
print(A[2, 0])
```

    [[ 3  4  5  6]
     [ 7  8  9 10]
     [11 12 13 14]] 
    
    [11 12 13 14] 
    
    [11 12 13 14] 
    
    [11 12] 
    
    11 
    
    11
    


```python
for row in A:
    print(row)
for column in A.T:   #可以按列遍历
    print(column)
```

    [3 4 5 6]
    [ 7  8  9 10]
    [11 12 13 14]
    [ 3  7 11]
    [ 4  8 12]
    [ 5  9 13]
    [ 6 10 14]
    

#### 1.A.flatten()  将A变为一维数组输出
#### 2.for item in A.flat  逐个输出A的值


```python
print(A.flatten())
for item in A.flat:
    print(item, end=' ')
```

    [ 3  4  5  6  7  8  9 10 11 12 13 14]
    3 4 5 6 7 8 9 10 11 12 13 14 

## array合并

1. `array3 = np.vstack((array1, array2))`vertical stack 垂直叠加，两个数组的维度可以不同
2. `array3 = np.hstack((array1, array2))`horizontal stack 水平叠加，要求两个数组的维度必须相同
3. `array3 = np.concatenate((A,B,B,A), axis=0)`axis=0在列这个维度进行合并，axis=1在行这个维度进行合并


```python
A = np.array([[1,1,1],[3,3,3]])
B = np.array([[2,2,2], [4,4,4]])
```


```python
C = np.vstack((A, B))   # vertical stack 垂直叠加
print(A.shape)
print(C.shape)
print(C)
E = np.concatenate((A, B), axis=0)
print(E)
```

    (2, 3)
    (4, 3)
    [[1 1 1]
     [3 3 3]
     [2 2 2]
     [4 4 4]]
    [[1 1 1]
     [3 3 3]
     [2 2 2]
     [4 4 4]]
    


```python
D = np.hstack((A, B))
print(D)
```

    [[1 1 1 2 2 2]
     [3 3 3 4 4 4]]
    

- `np.newaxis`在指定位置添加一个维度


```python
print(A)
```

    [1 1 1]
    


```python
print(A[:, np.newaxis])
print(A[np.newaxis, :])
```

    [[1]
     [1]
     [1]]
    [[1 1 1]]
    

## array分割

1. `np.split(ary, indices_or_sections, axis)`均等分割，把ary分割成若干块，按axis进行分割
2. `np.array_split()` 不均等分割，第0项分割出来的元素最多，其余均等分 
3. `np.vsplit(A, section)`纵向分割，分成section块，相当于axis=0
4. `np.hsplit(A, section)`横向分割，分成section块，相当于axis=1

[np.split()与np.array_split()函数](https://www.cnblogs.com/shona/p/12163515.html)


```python
A = np.arange(12).reshape(3,4)
A
```




    array([[ 0,  1,  2,  3],
           [ 4,  5,  6,  7],
           [ 8,  9, 10, 11]])




```python
a1, a2 = np.split(A, 2, 1)
print(a1, '\n\n', a2)
```

    [[0 1]
     [4 5]
     [8 9]] 
    
     [[ 2  3]
     [ 6  7]
     [10 11]]
    


```python
print(np.vsplit(A, 1))
```

    [array([[ 0,  1,  2,  3],
           [ 4,  5,  6,  7],
           [ 8,  9, 10, 11]])]
    


```python
print(np.hsplit(A, 2))
```

    [array([[0, 1],
           [4, 5],
           [8, 9]]), array([[ 2,  3],
           [ 6,  7],
           [10, 11]])]
    

## numpy copy

1. `b = a` 和`b = a[:]`为浅copy, `b is a`为`True`.   
注：python 的列表中`b = a[:]`为深copy
2. `b = a.copy()`为深copy


```python
a = np.arange(4)
a
```




    array([0, 1, 2, 3])




```python
b = a
b
```




    array([0, 1, 2, 3])




```python
a[0] = -1
b
```




    array([-1,  1,  2,  3])




```python
c = a.copy()
print(c)
a[0] = 1122
print(c)

```

    [-1  1  2  3]
    [-1  1  2  3]
    


```python
d = a[:]
print(d)
a[0] = 11111
print(d)
```

    [1122    1    2    3]
    [11111     1     2     3]
    

